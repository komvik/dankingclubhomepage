import {
  __async,
  __spreadValues
} from "./chunk-E3LOUS7X.mjs";
import { getCurrentEnv } from "genkit";
import { logger } from "genkit/logging";
import { enableTelemetry } from "genkit/tracing";
import { credentialsFromEnvironment } from "./auth.js";
import { GcpLogger } from "./gcpLogger.js";
import { GcpOpenTelemetry } from "./gcpOpenTelemetry.js";
import { TelemetryConfigs } from "./telemetry/defaults.js";
function enableGoogleCloudTelemetry(options) {
  return enableTelemetry(
    configureGcpPlugin(options).then((pluginConfig) => __async(this, null, function* () {
      logger.init(yield new GcpLogger(pluginConfig).getLogger(getCurrentEnv()));
      return new GcpOpenTelemetry(pluginConfig).getConfig();
    }))
  );
}
function configureGcpPlugin(options) {
  return __async(this, null, function* () {
    const envOptions = yield credentialsFromEnvironment();
    return __spreadValues({
      projectId: (options == null ? void 0 : options.projectId) || envOptions.projectId,
      credentials: (options == null ? void 0 : options.credentials) || envOptions.credentials
    }, TelemetryConfigs.defaults(options));
  });
}
export * from "./gcpLogger.js";
export * from "./gcpOpenTelemetry.js";
export {
  enableGoogleCloudTelemetry
};
//# sourceMappingURL=index.mjs.map